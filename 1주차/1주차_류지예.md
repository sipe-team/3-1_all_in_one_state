
# 1주차 상태관리 PR

## 1. 상태 관리를 사용해본 경험

### 로그인 및 토큰 관리

저희 서비스에서는 **AccessToken**과 **RefreshToken**을 사용하여 사용자 인증을 처리합니다. **AccessToken**은 1시간마다 만료되며, 만료 시 **RefreshToken**을 사용해 새로운 **AccessToken**을 발급받는 방식으로 설계되었습니다. 

이때, **로그인 상태**와 **토큰**을 일관성 있게 관리하기 위해 Redux를 사용했습니다. 보안적인 관점에서 AccessToken과 RefreshToken은 쿠키로 관리하고, **Redux**에서는 **인증 상태만 관리하는 방향**으로 설계했습니다.

```TypeScript
// Redux를 통한 로그인 상태 관리
const authSlice = createSlice({
  name: 'auth',
  initialState: {
    isAuthenticated: false,
  },
  reducers: {
    login(state) {
      state.isAuthenticated = true;
    },
    logout(state) {
      state.isAuthenticated = false;
    },
  },
});
```

### 장바구니 상태 관리

저희 서비스에서 초기에는 장바구니 상태를 장바구니 페이지 내에서만 관리하며, 단순한 구조로 운영했습니다. 하지만 사용성 개선 요구로 인해 나브바에 장바구니 아이콘을 추가하고, 사용자가 장바구니에 담은 **상품 개수를 전역에서 확인**할 수 있게 되었습니다. 이를 위해 상태를 전역에서 관리할 필요가 생겼습니다.

이때 **Redux**를 도입하여 상태를 전역에서 관리하게 되었고, 장바구니에 상품이 추가되거나 삭제될 때마다, 모든 페이지에서 이 상태 변화를 반영할 수 있도록 만들었습니다.

## 2. 선택한 라이브러리를 도입한 계기

저희 프로젝트에서는 상태 관리가 단순할 때는 **useState, useEffect**와 같은 React Hook을 사용해왔습니다. 하지만 프로젝트 규모가 커지면서 토큰 관리처럼 전역 상태를 여러 컴포넌트에서 공유하고, 서로 다른 컴포넌트 간의 상태 변경을 실시간으로 반영해야 하는 요구사항이 생기면서 **Redux**를 선택하게 되었습니다.

또한, **Redux Thunk**를 활용하여 비동기 API 요청(ex. 로그인 시 토큰 갱신)과 토큰 갱신 로직을 간편하게 구현할 수 있었습니다.

## 3. 클라이언트/서버 상태 관리

### React Query 도입

저희 서비스의 아카이빙 페이지는 사용자가 작성한 탐구 내역과 관심사를 보여주며, 이를 다양한 조건으로 필터링할 수 있는 페이지입니다. 필터링 기준은 7~8가지가 넘기 때문에, **데이터 패칭과 캐싱, 상태 관리**가 중요해졌습니다.

초기에 Axios로 API 요청을 처리했으나, 더 나은 상태 관리와 성능 최적화를 위해 **React Query**를 도입하게 되었습니다.

```TypeScript
// React Query를 이용한 서버 상태 관리
const fetchArchivingData = async () => {
  const response = await axios.get('/api/archiving');
  return response.data;
};

const { data, isLoading, error } = useQuery('archivingData', fetchArchivingData, {
  staleTime: 5 * 60 * 1000,
});
```

## 추가적으로 하고싶은 말?

솔직히 말씀드리면, 현재 **Redux**와 **React Query**를 사용하는 가장 큰 이유는 익숙함과 방대한 자료 덕분이었습니다. 특히, 프로젝트의 초기 단계에서는 익숙한 도구를 사용해 빠르게 개발을 진행하는 것이 중요했고, 이들 라이브러리는 실무에서의 검증된 사례도 많아 안정적이라고 판단했습니다.

그러나 프로젝트가 성장하고 규모가 커짐에 따라, **더 효율적인 상태 관리 방법**에 대해 고민하기 시작했습니다. 앞으로는 유지보수성을 높이고, 성능 최적화를 이루기 위해 다양한 상태 관리 라이브러리를 심도 있게 학습하고 적용해 보고 싶습니다.

이번 미션을 통해 **상태 관리의 원리**와 **아키텍처 설계**를 더 깊이 탐구하고, 프로젝트에 더 적합한 솔루션을 찾아 적용해 나가는 계기가 되었으면 합니다. 궁극적으로는, 현 상황에 맞는 도구를 선별하여 **유연하고 확장 가능한 구조를 설계**하는 것이 목표입니다.
